<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any
         other head content must come *after* these tags -->
    
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/styles.css">

    <title>Romi Rover Camera</title>

  </head>
  <body>
      
    <!---------------------------------------------->

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container">
        <a class="navbar-brand" href="https://romi-project.eu">
          <img src="assets/logo.svg" width="120px" />
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link  active" href="camera.html">Camera</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="programs.html">Programs</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="cameramount.html">Manual positioning</a>
            </li>
        </div>
      </div>
    </nav>

    <div class="container">
      <div id="image-viewer" class="image-viewer fixed-image">
        <img src="assets/white.png" id="camera" class="fixed-image">
      </div>
      
      <div class="button-panel">
        <button class="btn selected" id="btn-fixed-image">
          <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h48v48h-48z" fill="none"/><path d="M10 32h6v6h4v-10h-10v4zm6-16h-6v4h10v-10h-4v6zm12 22h4v-6h6v-4h-10v10zm4-22v-6h-4v10h10v-4h-6z"/></svg>            
        </button>
        <button class="btn" id="btn-scroll-image">
          <svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h48v48h-48z" fill="none"/><path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4h-10v10zm24 14h-6v4h10v-10h-4v6zm-6-24v4h6v6h4v-10h-10z"/></svg>              
        </button>
        
        <form style="display: inline;">
          <select id="panel-select">
            <option value="mode">Mode</option>
            <option value="exposure">Exposure</option>
            <option value="compression">Compression</option>
            <option value="processing">Processing</option>
          </select>
        </form>
      </div>            
    </div>
          
    <!---------------------------------------------->
          
    <div class="container overflow-scroll">
      
      <!---------------------------------------------->
      
      <div class="card text-dark bg-light border-success mb-2 mt-2" id="mode-panel">
        <div class="card-body">
          
          <div class="control-input">
            <div class="control-label"><label for="mode-select">Mode</label></div>
            <select id="mode-select">
              <option value="still" selected="true">Still</option>
              <option value="video">Video</option>
            </select>
          </div>
          
          <div class="control-input">
            <div class="control-label"><label for="resolution-select">Resolution</label></div>
            <select id="resolution-select">
              <optgroup label="HQ Camera">
                <option value="4056x3040">4056 x 3040</option>
                <option value="2028x1520" selected="true">2028 x 1520</option>
                <option value="1014x760">1014 x 760</option>
              </optgroup>
              <optgroup label="V2 Camera">
                <option value="3280x2464">3280 x 2464</option>
                <option value="1640x1232">1640 x 1232</option>
                <option value="820x616">820 x 616</option>
              </optgroup>
              <optgroup label="Generic">
                <option value="1920x1080">1920 x 1080 (HD)</option>
                <option value="640x480">640 x 480 (VGA)</option>
              </optgroup>
            </select>
          </div>

          <div class="control-input">
            <div class="control-label">Framerate</div>
            <div class="control-value">
              <input type="number" id="framerate-value" value="1" min="1" max="30" size="2">
            </div>
            <div class="control-info"></div>
          </div>
          
        </div>
      </div>
      
      <!---------------------------------------------->

      <div class="card text-dark bg-light border-success mb-2 mt-2" id="exposure-panel">
        <div class="card-body">

          <div class="control-input">
            <div class="control-label"><label for="exposure-mode-select">Exposure Mode</label></div>
            <select id="exposure-mode-select">
              <option value="off">Off</option>
              <option value="auto" selected="true">Auto</option>
              <option value="sports">Sports</option>
              <option value="verylong">Verylong</option>
              <option value="fixedfps">Fixedfps</option>
              <option value="night">Night</option>
              <option value="antishake">Antishake</option>
              
              <option value="nightpreview">Nightpreview</option>
              <option value="backlight">Backlight</option>
              <option value="spotlight">Spotlight</option>
              <option value="snow">Snow</option>
              <option value="beach">Beach</option>
              <option value="fireworks">Fireworks</option>
            </select>
          </div>

          <div class="control-input">
            <div class="control-label">Shutter Speed</div>
            <div class="control-slider">
            </div>
            <div class="control-value">
              <input type="number" id="shutter-speed-value" value="0" min="0" max="200000" size="5">
            </div>
            <div class="control-info">in milliseconds. 0=auto</div>
          </div>

          <div class="control-input">
            <div class="control-label">Analog Gain</div>
            <div class="control-slider">
              <input type="range" id="analog-gain-slider" value="1" min="1" max="12" step="0.1">
            </div>
            <div class="control-value">
              <input type="number" id="analog-gain-value" value="1" min="1" max="12"  step="0.1" size="3">
            </div>
            <div class="control-info"></div>
          </div>
        </div>
      </div>

      <!---------------------------------------------->

      <div class="card text-dark bg-light border-success mb-2 mt-2" id="compression-panel">
        <div class="card-body">

          <div class="control-input">
            <div class="control-label">JPEG Quality</div>
            <div class="control-slider">
              <input type="range" id="jpeg-quality-slider" value="85" min="0" max="100">
            </div>
            <div class="control-value">
              <input type="number" id="jpeg-quality-value" value="85" min="0" max="100" size="2">
            </div>
            <div class="control-info"></div>
          </div>

          <div class="control-input">
            <div class="control-label">Bitrate</div>
            <div class="control-value">
              <input type="number" id="bitrate-value" value="17000000" min="1000" max="25000000" size="8">
            </div>
            <div class="control-info">in bits/s, between 1000 and 25000000.</div>
          </div>
        </div>
      </div>

      <!---------------------------------------------->
      
      <div class="card text-dark bg-light border-success mb-2 mt-2" id="processing-panel">
        <div class="card-body">
          
          <div class="control-input">
            <div class="control-label">Saturation</div>
            <div class="control-slider">
              <input type="range" id="saturation-slider" value="0" min="-100" max="100">
            </div>
            <div class="control-value">
              <input type="number" id="saturation-value" value="0" min="-100" max="100" size="2">
            </div>
          </div>

          <div class="control-input">
            <div class="control-label">Sharpness</div>
            <div class="control-slider">
              <input type="range" id="sharpness-slider" value="0" min="-100" max="100">
            </div>
            <div class="control-value">
              <input type="number" id="sharpness-value" value="0" min="-100" max="100" size="2">
            </div>
          </div>

          <div class="control-input">
            <div class="control-label">Brightness</div>
            <div class="control-slider">
              <input type="range" id="brightness-slider" value="50" min="0" max="100">
            </div>
            <div class="control-value">
              <input type="number" id="brightness-value" value="50" min="0" max="100" size="2">
            </div>
          </div>
          
          <div class="control-input">
            <div class="control-label">Contrast</div>
            <div class="control-slider">
              <input type="range" id="contrast-slider" value="0" min="-100" max="100">
            </div>
            <div class="control-value">
              <input type="number" id="contrast-value" value="0" min="-100" max="100" size="2">
            </div>
          </div>

          <div class="control-input">
            <div class="control-label">ISO</div>
            <div class="control-slider">
              <input type="range" id="iso-slider" value="0" min="50" max="1000">
            </div>
            <div class="control-value">
              <input type="number" id="iso-value" value="0" min="50" max="1000" size="2">
            </div>
          </div>
          
        </div>
      </div>
    </div>

    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/remotecontroller.js"></script>
    <script src="js/camera.js"></script>

    <script type="text/javascript">
      window.onload = function() {
          let registryAddress = window.location.hostname;
          let deviceAddress = window.location.hostname + ':10100';
          var remoteController = new RemoteController('cablebot', registryAddress,
                                                      deviceAddress);
          initCamera('camera', remoteController, true);
      };
    </script>
    
  </body>
</html>
